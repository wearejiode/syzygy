{
  "name": "@jiode/sesame",
  "$schema": "../../../node_modules/nx/schemas/project-schema.json",
  "projectType": "application",
  "sourceRoot": "apps/core/jiode/sesame.jiode.one",
  "targets": {
    "bundle-worker": {
      "executor": "nx:run-commands",
      "options": {
        "command": "node apps/core/jiode/sesame.jiode.one/scripts/build-worker.mjs"
      },
      "outputs": ["{workspaceRoot}/dist/apps/sesame.jiode.one"]
    },
    "dev:once": {
      "executor": "nx:run-commands",
      "options": {
        "command": "pnpm -w nx run sesame.jiode.one:bundle-worker && wrangler dev dist/apps/sesame.jiode.one/meta-worker.generated.js --config apps/core/jiode/sesame.jiode.one/sesame-meta-worker/wrangler.toml --local"
      }
    },
    "push:data": {
      "executor": "nx:run-commands",
      "options": {
        "command": "npx wrangler r2 object put sesame-data/data.json  --file apps/core/jiode/sesame.jiode.one/data.json --remote"
      }
    },
    "deploy:generated:dist": {
      "executor": "nx:run-commands",
      "options": {
        "command": "wrangler deploy dist/apps/sesame.jiode.one/meta-worker.generated.js --config apps/core/jiode/sesame.jiode.one/sesame-meta-worker/wrangler.toml --no-interactive"
      }
    },
    "dev:live": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "{workspaceRoot}",
        "parallel": true,
        "commands": [
          "wrangler r2 object put sesame-data-preview/data.json --file apps/core/jiode/sesame.jiode.one/data.json --local --config apps/core/jiode/sesame.jiode.one/sesame-meta-worker/wrangler.toml",
          "pnpm -w nx run sesame.jiode.one:bundle-worker",
          "chokidar apps/core/jiode/sesame.jiode.one/templates/**/* --initial -d 200 -c \"pnpm -w nx run sesame.jiode.one:bundle-worker\"",
          "wait-on dist/apps/sesame.jiode.one/meta-worker.generated.js && wrangler dev dist/apps/sesame.jiode.one/meta-worker.generated.js --config apps/core/jiode/sesame.jiode.one/sesame-meta-worker/wrangler.toml --local --persist-to .wrangler/state"
        ]
      }
    },
    "release": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "{workspaceRoot}",
        "parallel": false,
        "commands": [
          "pnpm -w nx run sesame.jiode.one:push:data",
          "pnpm -w nx run sesame.jiode.one:bundle-worker",
          "pnpm -w nx run sesame.jiode.one:deploy:generated:dist"
        ]
      }
    }
  }
}
